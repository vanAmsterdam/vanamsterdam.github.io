{
  "hash": "5b2e2e54474fb1ac95eee8e4f31fb02a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Causality in Prediction Research & Target Trial Emulation\nsubtitle: AI methods lab seminar\nauthor: Wouter van Amsterdam\ndate: 2025-12-01\nbibliography: ../../library.bib\nformat: \n    revealjs:\n        incremental: true\n        theme: [../custom.scss]\n        center: true\n        fig-align: center\n        width: 1600\n        height: 900\n        toc: false\nexecute:\n    warning: false\n    message: false\ncategories:\n    - meetups\n---\n\n\n::: {.cell execute='true'}\n\n:::\n\n\n---\n\n![](figs/aimethodslab-liggend.png){fig-align=\"center\" width=\"100%\"}\n\n## Today's program\n\n- Wouter van Amsterdam: mini tutorial in confounding and causal inference\n- Oisín Ryan: Target Trial Emulation for vaccine safety studies\n- Steven Hageman: Prediction models for Cardiovascular Risk management\n- Lotta Meijerink: Prediction models for treatment decisions in Radiotherapy\n\n## Predictions and associations\n\n### \"What to expect when we passively observe the world\"\n\n![](figs/prediction.png)\n\n## What are causal questions?\n\nQuestions with an element of 'what if'\n\n. . . \n\n[What will happen if we treat all patients with A (versus B)?]{.r-fit-text}\n\n## What if we send all babies to the hospital for delivery?\n\n::: {.r-stack}\n\n![](figs/delivery1.png)\n\n![](figs/delivery2.png){.fragment}\n\n![](figs/delivery.png){.fragment}\n\n:::\n\n## Home delivery versus hospital delivery\n\n- You're a data scientist in a children's hospital\n- Have data on\n  - delivery location (home or hospital)\n  - neonatal outcomes (good or bad)\n  - pregnancy risk (high or low)\n- Question: if we send all deliveries to the hospital, will neonatal outcomes improve?\n\n. . .\n\n\n::: {.cell}\n\n:::\n\n\n. . . \n\n\n## Observed data\n\n|      |      | location |          |\n|------|------|---------:|---------:|\n|      |      | home     | hospital |\n| risk | low  | 648 / 720 = 90% | 19 / 20 = 95% |\n\n: percentage of good neonatal outcomes\n\n- better outcomes for babies with low risk when delivered in the hospital\n\n## Observed data\n\n|      |      | location |          |\n|------|------|---------:|---------:|\n|      |      | home     | hospital |\n| risk | low  | 648 / 720 = 90% | 19 / 20 = 95% |\n|      | high | 40 / 80 = 50% | 144 / 180 = 80% |\n\n: percentage of good neonatal outcomes\n\n- better outcomes for babies delivered in the hospital for *both risk groups*\n- between 5% and 30% better\n\n\n## Observed data\n\n|      |      | location |          |\n|------|------|---------:|---------:|\n|      |      | home     | hospital |\n| risk | low  | 648 / 720 = 90% | 19 / 20 = 95% |\n|      | high | 40 / 80 = 50% | 144 / 180 = 80% |\n|      |      |                  |                  |\n|      | *marginal* | 688 / 800 = 86% | 163 / 200 = 81.5% |\n\n- better outcomes for babies delivered in the hospital for *both risk groups*\n- but not better *marginal* ('overall')\n- how is this possible?\n- what is the correct way to estimate the effect of delivery location?\n\n## Causal Directed Acyclic Graphs\n\n### diagram that represents our assumptions on causal relations\n\n1. nodes are variables\n2. arrows (directed edges) point from cause to effect\n\n## Making a DAG for our example:\n\n![](figs/dag-delivery.png){height=20% fig-align=\"center\"}\n\n- assumptions:\n    - women with high risk of bad neonatal outcomes (`pregnancy risk`) are referred to the hospital for delivery\n    - hospital deliveries lead to better outcomes for babies as more emergency treatments possible\n    - both `pregnancy risk` and `hospital delivery` cause `neonatal outcome`\n- the *other variable* `pregnancy risk` is a common cause of the treatment (`hospital delivery`) and the outcome (this is called a confounder)\n\n\n## Intervention as graph surgery\n\n- Our question: what if we send all deliveries to the hospital?\n- In this *hypothetical world*, all deliveries (low risk and high risk) go to hospital (or home)\n- Can be observed in a Randomized Controlled Trial (RCT)\n- In the DAG: the arrow from `pregnancy risk` to `hospital delivery` should be removed\n\n![](figs/dag-delivery-int.png){.fragment height=\"40%\" fig-align=\"center\"}\n\n## Using DAGs to identify causal effects\n\n- in our example, we can calculate the causal effect of `hospital delivery` on `neonatal outcome` by looking at the effect within levels of `pregnancy risk`\n- this is an example of a broader theme:\n  - we have non-experimental (observational) data\n  - would like to answer a question about an intervention, as we would observe in a randomized trial\n  - causal inference toolbox: express assumptions on our data\n  - derive how to estimate the causal effect from observational data (covariate adjustment, inverse probability weighting, etc)\n\n## Today's program\n\n- Wouter van Amsterdam: mini tutorial in confounding and causal inference\n- Oisín Ryan: Target Trial Emulation for vaccine safety studies\n- Steven Hageman: Prediction models for Cardiovascular Risk management\n- Lotta Meijerink: Prediction models for treatment decisions in Radiotherapy\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}